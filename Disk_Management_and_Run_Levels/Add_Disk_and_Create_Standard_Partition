ğŸ’¾ Adding a Disk and Creating New Partition in Linux
ğŸ“Œ Why Add a New Disk?

Run out of disk space.

Separate applications onto different partitions.

Better organization and performance.

ğŸ”¹ Steps in VirtualBox (Lab Setup)

Create a Snapshot before making changes (safety net).

Go to Settings â†’ Storage â†’ Add new disk.

Choose Create New Disk â†’ VDI â†’ Dynamically allocated.

Name it (e.g., datadisk) â†’ set size (e.g., 2 GB).

Start VM.

ğŸ”¹ Verify Current Disks

df -h â†’ shows existing mounted filesystems.

fdisk -l â†’ lists all disks and partitions.

Example:

/dev/sda = main 10 GB disk (with root + swap).

/dev/sdb = new 2 GB disk (unpartitioned).

ğŸ”¹ Partition the New Disk

Run: fdisk /dev/sdb.

Inside fdisk:

n â†’ create new partition.

p â†’ primary (default).

Partition number: 1.

First sector: leave default (2048).

Last sector: leave default (use whole disk).

Confirm with w â†’ writes changes to disk.

Verify: fdisk -l â†’ now shows /dev/sdb1.

ğŸ”¹ Create Filesystem

Run: mkfs.xfs /dev/sdb1

This formats the partition with XFS filesystem.

ğŸ”¹ Mount the Partition

Create mount point: mkdir /data.

Mount: mount /dev/sdb1 /data.

Verify: df -h â†’ shows /dev/sdb1 mounted on /data.

ğŸ”¹ Persist Mount Across Reboots

Edit /etc/fstab:
/dev/sdb1    /data    xfs    defaults    0 0
Save and exit.

Now, partition auto-mounts on boot.

ğŸ”¹ Useful Commands

Reboot test: init 6 â†’ verify /data is still mounted.

Unmount: umount /data.

Mount all fstab entries: mount -a.

âœ… Key Takeaways

Always create snapshot before messing with partitions.

fdisk = create partitions.

mkfs = format filesystem.

mount = attach filesystem to directory.

fstab = makes mounts permanent across reboots.




ğŸ–¥ï¸ What happens when you plug in a new HDD/SSD

The BIOS/UEFI + OS kernel will detect the new hardware (disk).

But the disk is just raw storage at this point.

It has no filesystem yet (like NTFS on Windows, ext4/XFS on Linux, APFS on macOS).

Without a filesystem, the OS doesnâ€™t know how to organize files and folders on it.

ğŸ“‚ Why you need to â€œmountâ€ it

In Linux, everything is under a single directory tree (/).

A new disk does not automatically appear there â€” you must tell Linux â€œwhere in the tree should this storage be accessible?â€

Thatâ€™s what mounting does:

Example: you mount /dev/sdb1 â†’ /data.

Now, when you cd /data, you are actually looking at that new diskâ€™s storage.

Think of mounting as giving the OS a doorway into your new storage.
Without mounting, the disk is invisible to users and apps, even though the hardware exists.

ğŸ”‘ Real-World Scenarios

Server expands storage:
A database serverâ€™s /var/lib/mysql partition is full. Admin adds a new SSD, mounts it to /var/lib/mysql, and moves the database there.

Separate disks for applications:
A company may keep logs on /var/log mounted from a separate disk, so logs donâ€™t fill up the main OS disk.

Data isolation:
Developers mount an extra disk on /home so user files donâ€™t mix with OS/system files.

External drives:
When you plug in a USB drive, the OS automatically mounts it (e.g., /media/usb) so you can use it. On Linux servers, you often need to mount manually.

âš¡ Difference vs Windows

In Windows:
New disks are formatted with a filesystem (NTFS, exFAT) â†’ then they are assigned a drive letter (D:, E:). Thatâ€™s Windowsâ€™ way of â€œmountingâ€.

In Linux:
No drive letters. Everything plugs into the single tree (/). You decide where by mounting.

âœ… So in your example:

If you just plug in a new SSD â†’ the OS sees it (like â€œhereâ€™s a raw 500GB deviceâ€), but until you partition, format, and mount it, you canâ€™t store files on it.