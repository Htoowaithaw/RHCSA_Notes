ğŸ“ LVM Lecture Notes
ğŸ”¹ Concept Overview

LVM (Logical Volume Manager) allows flexible disk management.

Hierarchy:

Hard disk â†’

Partition â†’

Physical Volume (PV) â†’

Volume Group (VG) â†’

Logical Volume (LV) â†’

Mount to file system.

Logical Volumes behave like standard partitions but are easier to resize and manage.

ğŸ”¹ Steps Explained

Add New Disk in VirtualBox

Power off VM â†’ Settings â†’ Storage â†’ Add new disk â†’ Create new disk.

Choose VDI, dynamically allocated, size (e.g., 1 GB).

Name it (e.g., diskoracle) and boot system.

Check New Disk

Run fdisk -l.

Example:

sda = 10 GB (system disk)

sdb = 2 GB (previous disk)

sdc = 1 GB (new disk)

Create Partition on New Disk

Run fdisk /dev/sdc.

Steps inside fdisk:

n â†’ new partition

p â†’ primary

1 â†’ first partition

Accept defaults for first/last sector.

t â†’ change type â†’ enter 8e (Linux LVM).

p â†’ confirm shows "Linux LVM".

w â†’ write changes.

Create Physical Volume (PV)

pvcreate /dev/sdc1

Verify: pvdisplay

Create Volume Group (VG)

vgcreate oracle_vg /dev/sdc1

Verify: vgdisplay oracle_vg

Create Logical Volume (LV)

lvcreate -n oracle_lv -L 1000M oracle_vg

(Note: cannot use full size because LVM metadata takes some space).

Verify: lvdisplay

Format Logical Volume

mkfs.xfs /dev/oracle_vg/oracle_lv

Mount the Logical Volume

mkdir /oracle

mount /dev/oracle_vg/oracle_lv /oracle

Verify: df -h (should show mounted at /oracle).

Unmount (if needed)

umount /oracle

ğŸ”¹ Key Commands (Order)

fdisk /dev/sdX â†’ create partition with type 8e.

pvcreate /dev/sdX1 â†’ physical volume.

vgcreate vg_name /dev/sdX1 â†’ volume group.

lvcreate -n lv_name -L size vg_name â†’ logical volume.

mkfs.xfs /dev/vg_name/lv_name â†’ format LV.

mount /dev/vg_name/lv_name /mountpoint â†’ mount LV.

df -h â†’ verify mount.

ğŸ”¹ Summary

LVM setup follows strict order: Disk â†’ Partition â†’ PV â†’ VG â†’ LV â†’ File System â†’ Mount.

Always leave a little space when creating LV (cannot use 100% of disk).

LVM makes it easier to manage storage dynamically compared to fixed partitions.


For clear visual diagrams, please check below images;

Diagram_for_Add_Disk_and_LVM_Partition.png
Editing_config_for_mounting_at_boot_time.png