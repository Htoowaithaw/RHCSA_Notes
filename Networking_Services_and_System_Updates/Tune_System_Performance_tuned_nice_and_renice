# ğŸš€ Linux System Performance Tuning Notes  

## ğŸ¯ Overview  
Linux systems come pre-optimized, but performance can be further tuned using:  
1. **Tuned Daemon (`tuned`)** â€“ applies system-wide performance profiles.  
2. **Nice & Renice** â€“ adjusts process priorities.  

---

## ğŸ”§ Tuned Daemon  

### ğŸ“Œ What is Tuned?  
- Pronounced **â€œtune-Dâ€** (D = daemon).  
- A **systemd service** that tunes performance dynamically.  
- Installed by default on **RHEL/CentOS 7 & 8**.  
- Package name: `tuned`.  
- Continuously runs in background and adjusts settings (e.g., network, I/O).  

### ğŸ“‚ Predefined Profiles  
- **balanced** â€“ compromise between power saving & performance.  
- **desktop** â€“ responsive desktop experience.  
- **throughput-performance** â€“ maximize throughput.  
- **latency-performance** â€“ optimize for low latency.  
- **network-latency** â€“ improve network latency.  
- **network-throughput** â€“ maximize network throughput.  
- **powersave** â€“ minimize power usage.  
- **oracle** â€“ tuned for Oracle DB workloads.  
- **virtual-guest** â€“ optimize system as a VM.  
- **virtual-host** â€“ optimize system as a VM host.  

(Vendors can provide custom profiles, e.g., for SAP.)  

---

# ğŸ› ï¸ Understanding Tuned Profiles in Linux

## ğŸ“Œ What is a Tuned Profile?
- A **profile** is a set of **predefined system settings** bundled together for a specific goal (e.g., save power, maximize performance, reduce latency).
- These settings affect things like:
  - CPU governor (performance vs powersave)
  - Disk I/O scheduler
  - Kernel parameters
  - Network stack tuning
  - Power management features
- Instead of tweaking all configs manually, you just select one profile.

---

## ğŸ”‘ Important Point
ğŸ‘‰ **Only one profile can be active at a time.**  
When you switch profiles, tuned disables the old one and applies the new one.  

Example:
- If you set `powersave` â†’ tuned adjusts CPU, disk, and network to **minimize energy usage** (lower performance).  
- If you set `throughput-performance` â†’ tuned configures system for **max throughput** (high performance, higher power usage).  
- You cannot have both at once, because their settings conflict.

---

## ğŸ—‚ï¸ Common Profiles Explained
- **balanced** â†’ Default, general-purpose. Balanced between performance & power saving.  
- **desktop** â†’ Faster response for apps, better interactivity (good for desktops).  
- **throughput-performance** â†’ Max throughput, good for heavy I/O or server workloads.  
- **latency-performance** â†’ Reduce latency at cost of more power (good for apps where timing matters).  
- **network-latency** â†’ Low-latency networking (good for trading/real-time apps).  
- **network-throughput** â†’ Maximize network throughput (e.g., file servers, streaming).  
- **powersave** â†’ Optimize for low power consumption (e.g., laptops).  
- **oracle** (sometimes available) â†’ Tuned specifically for Oracle DB workloads.  
- **virtual-guest** â†’ Optimize when running inside a VM (your current active profile).  
- **virtual-host** â†’ Optimize for KVM hosts running many VMs.  

---

## âš¡ Example Workflow
1. See current profile:  
   `tuned-adm active`
2. Switch to powersave (good for laptops):  
   `tuned-adm profile powersave`
3. Switch to performance (good for servers):  
   `tuned-adm profile throughput-performance`

---


### ğŸ› ï¸ Tuned Commands  
- Check if installed:  
  `rpm -qa | grep tuned`  

- Install if missing:  
  `yum install tuned` (RHEL 7)  
  `dnf install tuned` (RHEL 8)  

- Manage service:  
  ```bash
  systemctl status tuned
  systemctl start tuned
  systemctl enable tuned

    Check active profile:
    tuned-adm active

    List all profiles:
    tuned-adm list

    Switch profile:
    tuned-adm profile <profile-name>

    Get recommendation:
    tuned-adm recommend

    Disable tuned:
    tuned-adm off

ğŸŒ Web Console (Cockpit Integration)

    Access via: https://<IP>:9090

    Login â†’ Overview â†’ Configuration â†’ Performance Profile

    Change profile directly via GUI.

    If blocked, allow port 9090 in firewall (firewalld) or stop firewall for lab use:
    systemctl stop firewalld

âš¡ Process Prioritization (Nice & Renice)
ğŸ“Œ Concept

    Linux schedules processes based on priority levels.

    Nice values (NI): range -20 (highest priority) â†’ 19 (lowest).

    Default nice: 0.

    System priority (PR): kernel-mapped from 0â€“139 (0â€“99 for RT, 100â€“139 for users).

ğŸ› ï¸ Commands

    View priorities:

        top â†’ shows PR and NI columns.

        ps axo pid,comm,nice,cls --sort=-nice â†’ sorted priorities.

    Run process with custom nice:
    nice -n -15 top

        Launches top with higher priority (NI = -15).

    Change priority of existing process:

    renice -n 12 -p <PID>

    Example:
    renice -n 12 -p 9360

ğŸ“Š Example Workflow

    Run top â†’ see process NI = 0, PR = 20.

    Start process with higher priority:
    nice -n -15 top â†’ NI = -15, PR = 5.

    Change priority while running:
    renice -n 12 -p 9360 â†’ NI = 12, PR = 32.



    âš¡ Can Tuned Switch Profiles Automatically?
1. Default Behavior

No â€” tuned does not switch profiles by itself out of the box.

You set one profile active at a time (tuned-adm profile â€¦) and it stays that way until you change it.

2. But There Is a Way â†’ Tuned Profiles with Plugins

Tuned supports dynamic plugins inside some profiles.

Example: The balanced profile will already adjust things like CPU governor based on system load.

Low load â†’ CPU goes into low-power states.

High load â†’ CPU speeds up.

This is limited to what the profile defines (mostly CPU/power tuning).

It wonâ€™t automatically switch from powersave â†’ throughput-performance unless you script it.

3. Custom Automation

If you want true automatic switching (e.g., battery <20% â†’ powersave), you can:

Write a systemd service or script that:

Checks battery level or CPU load.

Runs tuned-adm profile <name> accordingly.

Example (pseudo-script):

ğŸ“ Key Takeaways

    Tuned daemon = whole-system optimization (profiles).

    Nice/Renice = process-level prioritization.

    Use tuned profiles for broad tuning, nice/renice for fine-grained control.

    Always choose profiles/process priorities based on workload needs.



