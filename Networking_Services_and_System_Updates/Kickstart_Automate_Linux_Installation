# âš™ï¸ Kickstart â€“ Automated Linux Installation

## ğŸš€ What is Kickstart?
- **Kickstart** = automated method of installing Linux OS.
- Removes need for manual input during setup.
- Pre-answers installation questions like:
  - Language & timezone  
  - Disk partitioning  
  - Package selection  
  - Network & hostname  
  - Security settings  

---

## ğŸ¯ Why Use Kickstart?
- Saves time when installing **many servers**.
- Example:
  - 1 server â†’ manual install is fine.  
  - 20, 50, or 1000 servers â†’ Kickstart automates everything.  
- Configuration is stored in a **Kickstart file (ks.cfg)**.

---

## ğŸ›  Kickstart Setup â€“ Steps
1. **Choose a Kickstart Server**
   - Any Linux machine can be dedicated as Kickstart server.

2. **Create/Edit Kickstart File**
   - Contains predefined installation parameters.
   - Must be shared via **network service**:  
     - NFS, FTP, HTTP/HTTPS.

3. **Make Installation Source Available**
   - Provide access to the **OS ISO image**.
   - Can be on Kickstart server or attached directly to client.

4. **Boot Client & Start Installation**
   - Client accesses `ks.cfg` and ISO image.
   - Installation runs automatically without user input.

---

## ğŸ“‚ Kickstart File Sources
- **system-config-kickstart** (GUI tool in CentOS/Red Hat 7)
  - Install with:
    ```bash
    yum install system-config-kickstart
    ```
  - Provides GUI to set parameters.
- **Anaconda Installer Output**
  - Every Linux install creates `/root/anaconda-ks.cfg`.
  - Contains all answers given during first manual install.
  - Can be reused and edited for Kickstart automation.
- **Note**: GUI tool removed in RHEL/CentOS 8 â†’ use Anaconda file directly.

---

## ğŸ What is Anaconda?
- **Anaconda** = the Linux installation wizard.
- Creates file `/root/anaconda-ks.cfg` after first install.
- File includes:
  - Hostname  
  - Language  
  - Partitioning  
  - Root password (encrypted)  
  - User accounts  

---

## ğŸŒ Kickstart Server Setup Example (HTTP)
1. Install Apache (HTTPD):
   ```bash
   yum install httpd -y
   systemctl start httpd
   systemctl enable httpd

    Copy Kickstart file to Apache directory:

cp /root/anaconda-ks.cfg /var/www/html/ks.cfg
chmod a+r /var/www/html/ks.cfg

Disable firewall (lab only) or allow port 80:

systemctl stop firewalld
systemctl disable firewalld

Verify access in browser:

    http://<Kickstart-Server-IP>/ks.cfg

ğŸ–¥ Kickstart Client Installation

    Create new VM / physical server.

    Boot from Linux ISO.

    Interrupt boot menu â†’ enter boot option:

    linux ks=http://<Kickstart-Server-IP>/ks.cfg

    System installs automatically using ks.cfg.

ğŸ”§ Static IP (No DHCP Server)

If no DHCP is available, provide network settings manually:

linux ks=http://<server-ip>/ks.cfg ksdevice=eth0 ip=192.168.1.50 netmask=255.255.255.0 gateway=192.168.1.1

    ksdevice=eth0 â†’ network interface name (VM may use enp0s3).

    ip â†’ static IP for client.

    netmask â†’ usually 255.255.255.0.

    gateway â†’ default gateway of network.

âš¡ Benefits of Kickstart

    Install hundreds of servers fast & consistent.

    Parameters easily modified in ks.cfg.

    Works with both physical & virtual machines.

    Still widely used in corporates despite modern alternatives (VM templates, Ansible, etc.).

âœ… Key Takeaways

    Kickstart automates Linux installation with ks.cfg.

    File can be created manually (system-config-kickstart) or reused from Anaconda.

    Needs a Kickstart server to host config + installation source.

    Clients boot with special linux ks=... command â†’ OS installs automatically.

    Supports DHCP or static IP network configs.




    Specific for internal network VMs,

    # ğŸ“ Kickstart Installation via Apache in VirtualBox (VM-to-VM)

This note documents how to fix and perform a **Kickstart (ks.cfg) installation** when using **VirtualBox with multiple VMs** (one as HTTP server, one as installer).

---

## âš™ï¸ Scenario
- **VM1 (Kickstart Server)** = Running Apache (`httpd`) and hosting `anaconda-ks.cfg`.
- **VM2 (New Linux Install)** = Needs to fetch Kickstart file during installation.
- **VirtualBox Network** = Both VMs use **Internal Network (intnet)** to talk to each other.

---

## ğŸ›  Steps on VM1 (Kickstart Server)
1. Copy the ks.cfg file into Apacheâ€™s default web directory:
   ```bash
   sudo cp /root/anaconda-ks.cfg /var/www/html/
   sudo systemctl restart httpd

    Verify Apache is serving the file:

    curl http://192.168.56.101/anaconda-ks.cfg

    You should see the content of the file.
    (Replace 192.168.56.101 with VM1â€™s IP address on intnet.)

ğŸŒ VirtualBox Network Configuration

    VM1 (Server) â†’ Adapter 1 â†’ Internal Network (intnet)

    VM2 (Installer) â†’ Adapter 1 â†’ Internal Network (intnet)

    Both VMs must be on the same internal LAN.

    NAT / Port Forwarding is not required for kickstart between VMs.

ğŸ’» Booting VM2 (Installer)

At the boot prompt (boot:) for older ISOs:

linux inst.ks=http://192.168.56.101/anaconda-ks.cfg ip=dhcp

For newer GRUB/EFI boot menus:

    Highlight Install CentOS/RedHatâ€¦ line.

    Press Tab (BIOS) or e (UEFI).

    Append to the linux or linuxefi line:

    inst.ks=http://192.168.56.101/anaconda-ks.cfg ip=dhcp

ğŸ§° Debugging Tips

    During installer boot, press Ctrl+Alt+F2 for a shell:

    ip addr            # Check network interface + IP
    ping 192.168.56.101   # Verify server is reachable
    curl http://192.168.56.101/anaconda-ks.cfg   # Verify file is accessible

    If 404 Not Found â†’ file not in /var/www/html/.

    If No route to host â†’ network misconfigured (check VirtualBox adapters).

âœ… Checklist

Apache running on VM1.

anaconda-ks.cfg placed in /var/www/html/.

Both VMs use Internal Network (intnet).

Installer booted with correct inst.ks parameter.

    Verified with curl inside installer shell if it fails.

ğŸ‘‰ With this workflow, any time kickstart fails, check:
(1) File path, (2) Apache running, (3) Network config.


ğŸ–¥ï¸ When you boot the new VM (kslinux)

Youâ€™ll see a black screen with a prompt like this:
boot:

This is the place to type your boot options.

âŒ¨ï¸ What to type

Type the whole line in one shot, for example (if your NIC is enp0s3):
linux inst.ks=http://192.168.56.101/anaconda-ks.cfg inst.ksdevice=enp0s3 ip=192.168.56.102::192.168.56.1:255.255.255.0:kslinux:enp0s3:none nameserver=8.8.8.8

If your NIC name is eth0, change both places (inst.ksdevice=eth0 and the ip=â€¦:eth0:none).

ğŸ” Breaking down the line

linux â†’ tells the installer kernel to start

inst.ks=... â†’ where to fetch kickstart file

inst.ksdevice=... â†’ which NIC to use (enp0s3 or eth0)

ip=192.168.56.102::192.168.56.1:255.255.255.0:kslinux:enp0s3:none

IP = 192.168.56.102

Gateway = 192.168.56.1 (ok even if unused)

Netmask = 255.255.255.0

Hostname = kslinux

NIC = enp0s3 (or eth0)

none = no autoconfig (not DHCP)

nameserver=8.8.8.8 â†’ DNS

ğŸ§° Tips

Typing long lines: itâ€™s okay if it wraps on screen, just keep typing until done and press Enter.

If youâ€™re unsure of NIC name, at the boot: prompt you can just try with eth0 first (most VirtualBox installs use enp0s3 or eth0).